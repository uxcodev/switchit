{"ast":null,"code":"import jwt_decode from \"jwt-decode\";\nlet api = {\n  async createToken(email) {\n    console.log(\"email\");\n    console.log(email);\n    try {\n      let body = {\n        email: email\n      };\n      const options = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      };\n      let url = process.env.VUE_APP_API_URL;\n      const response = await fetch(`${url}/users/create-token`, options);\n      const data = await response.json();\n      localStorage.setItem('switchit_token', data.token);\n      let decodedToken = jwt_decode(data.token);\n      this.$store.dispatch('setUser', decodedToken.user);\n      return data.token;\n    } catch (err) {\n      console.error(err);\n    }\n  },\n  async getUsers() {\n    let token = localStorage.getItem('switchit_token');\n    // console.log(`getUsers token: ${token}`)\n\n    try {\n      const options = {\n        method: \"GET\",\n        headers: {\n          accept: \"application/json\",\n          authorization: `Bearer ${token}`\n        }\n      };\n      let url = process.env.VUE_APP_API_URL;\n      const response = await fetch(`${url}/users/get-users`, options);\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      console.error(err);\n    }\n    return true;\n  },\n  async updateUser(id, fields) {\n    try {\n      let token = localStorage.getItem('switchit_token');\n      let body = {\n        id: id,\n        fields: fields\n      };\n      const options = {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(body)\n      };\n      let url = process.env.VUE_APP_API_URL;\n      const response = await fetch(`${url}/users/update-user`, options);\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      console.error(err);\n    }\n  }\n};\nexport default api;","map":{"version":3,"names":["jwt_decode","api","createToken","email","console","log","body","options","method","headers","JSON","stringify","url","process","env","VUE_APP_API_URL","response","fetch","data","json","localStorage","setItem","token","decodedToken","$store","dispatch","user","err","error","getUsers","getItem","accept","authorization","updateUser","id","fields"],"sources":["/Users/nick/Sites/switchit-vue/src/api/switchit.js"],"sourcesContent":["import jwt_decode from \"jwt-decode\";\n\nlet api = {\n  async createToken(email) {\n\n    console.log(\"email\")\n    console.log(email)\n    try {\n      let body = {\n        email: email\n      }\n      const options = {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(body)\n      }\n\n      let url = process.env.VUE_APP_API_URL\n      const response = await fetch(\n        `${url}/users/create-token`,\n        options\n      )\n      const data = await response.json();\n      localStorage.setItem('switchit_token', data.token)\n\n      let decodedToken = jwt_decode(data.token)\n      this.$store.dispatch('setUser', decodedToken.user)\n\n      return data.token;\n    } catch (err) {\n      console.error(err);\n    }\n  },\n\n  async getUsers() {\n    let token = localStorage.getItem('switchit_token');\n    // console.log(`getUsers token: ${token}`)\n\n    try {\n      const options = {\n        method: \"GET\",\n        headers: {\n          accept: \"application/json\",\n          authorization: `Bearer ${token}`,\n        },\n      };\n\n      let url = process.env.VUE_APP_API_URL\n      const response = await fetch(\n        `${url}/users/get-users`,\n        options\n      );\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      console.error(err);\n    }\n    return true\n  },\n\n  async updateUser(id, fields) {\n    try {\n      let token = localStorage.getItem('switchit_token');\n      let body = {\n        id: id,\n        fields: fields\n      }\n      const options = {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(body)\n      }\n\n      let url = process.env.VUE_APP_API_URL\n      const response = await fetch(\n        `${url}/users/update-user`,\n        options\n      )\n      const data = await response.json();\n      return data;\n    } catch (err) {\n      console.error(err);\n    }\n  },\n\n}\n\nexport default api"],"mappings":"AAAA,OAAOA,UAAU,MAAM,YAAY;AAEnC,IAAIC,GAAG,GAAG;EACR,MAAMC,WAAW,CAACC,KAAK,EAAE;IAEvBC,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;IACpBD,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IAClB,IAAI;MACF,IAAIG,IAAI,GAAG;QACTH,KAAK,EAAEA;MACT,CAAC;MACD,MAAMI,OAAO,GAAG;QACdC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDH,IAAI,EAAEI,IAAI,CAACC,SAAS,CAACL,IAAI;MAC3B,CAAC;MAED,IAAIM,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,eAAe;MACrC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACzB,GAAEL,GAAI,qBAAoB,EAC3BL,OAAO,CACR;MACD,MAAMW,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;MAClCC,YAAY,CAACC,OAAO,CAAC,gBAAgB,EAAEH,IAAI,CAACI,KAAK,CAAC;MAElD,IAAIC,YAAY,GAAGvB,UAAU,CAACkB,IAAI,CAACI,KAAK,CAAC;MACzC,IAAI,CAACE,MAAM,CAACC,QAAQ,CAAC,SAAS,EAAEF,YAAY,CAACG,IAAI,CAAC;MAElD,OAAOR,IAAI,CAACI,KAAK;IACnB,CAAC,CAAC,OAAOK,GAAG,EAAE;MACZvB,OAAO,CAACwB,KAAK,CAACD,GAAG,CAAC;IACpB;EACF,CAAC;EAED,MAAME,QAAQ,GAAG;IACf,IAAIP,KAAK,GAAGF,YAAY,CAACU,OAAO,CAAC,gBAAgB,CAAC;IAClD;;IAEA,IAAI;MACF,MAAMvB,OAAO,GAAG;QACdC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACPsB,MAAM,EAAE,kBAAkB;UAC1BC,aAAa,EAAG,UAASV,KAAM;QACjC;MACF,CAAC;MAED,IAAIV,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,eAAe;MACrC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACzB,GAAEL,GAAI,kBAAiB,EACxBL,OAAO,CACR;MACD,MAAMW,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;MAClC,OAAOD,IAAI;IACb,CAAC,CAAC,OAAOS,GAAG,EAAE;MACZvB,OAAO,CAACwB,KAAK,CAACD,GAAG,CAAC;IACpB;IACA,OAAO,IAAI;EACb,CAAC;EAED,MAAMM,UAAU,CAACC,EAAE,EAAEC,MAAM,EAAE;IAC3B,IAAI;MACF,IAAIb,KAAK,GAAGF,YAAY,CAACU,OAAO,CAAC,gBAAgB,CAAC;MAClD,IAAIxB,IAAI,GAAG;QACT4B,EAAE,EAAEA,EAAE;QACNC,MAAM,EAAEA;MACV,CAAC;MACD,MAAM5B,OAAO,GAAG;QACdC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,cAAc,EAAE,kBAAkB;UAClCuB,aAAa,EAAG,UAASV,KAAM;QACjC,CAAC;QACDhB,IAAI,EAAEI,IAAI,CAACC,SAAS,CAACL,IAAI;MAC3B,CAAC;MAED,IAAIM,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,eAAe;MACrC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CACzB,GAAEL,GAAI,oBAAmB,EAC1BL,OAAO,CACR;MACD,MAAMW,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;MAClC,OAAOD,IAAI;IACb,CAAC,CAAC,OAAOS,GAAG,EAAE;MACZvB,OAAO,CAACwB,KAAK,CAACD,GAAG,CAAC;IACpB;EACF;AAEF,CAAC;AAED,eAAe1B,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}